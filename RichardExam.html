<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Richard's Exam Assistant - Complete Revision System</title>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4ade80;
            --warning: #fbbf24;
            --danger: #f87171;
            --english: #06d6a0;
            --french: #7209b7;
            --geography: #073b4c;
            --history: #ffd166;
            --science: #118ab2;
            --latin: #ff9e00;
            --greek: #8338ec;
            --tandp: #fb5607;
            --math: #ef476f;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7ff 0%, #eef1ff 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header - Updated to black with logo */
        header {
            background: linear-gradient(135deg, #000000, #1a1a1a);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.1;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            position: relative;
        }
        
        .header-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
        }
        
        .header-text h1 {
            font-size: 2rem;
            margin-bottom: 5px;
            color: white;
        }
        
        .slogan {
            font-size: 1rem;
            opacity: 0.9;
            font-style: italic;
            color: #d0d0d0;
        }
        
        .exam-info {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .exam-dates {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        .countdown {
            font-size: 1.1rem;
            font-weight: 600;
            color: #4ade80;
        }
        
        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (min-width: 1200px) {
            .main-layout {
                grid-template-columns: 2fr 1fr;
            }
        }
        
        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .card-title {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(67, 97, 238, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }
        
        .card-title i {
            color: var(--secondary);
        }
        
        /* Subjects Accordion */
        .subjects-accordion {
            margin-top: 15px;
        }
        
        .subject-item {
            margin-bottom: 15px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.08);
        }
        
        .subject-header {
            background: white;
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border-left: 5px solid var(--primary);
        }
        
        .subject-header:hover {
            background: #f8f9ff;
        }
        
        .subject-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .subject-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .subject-meta {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .exam-date {
            background: var(--accent);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .subject-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-bar {
            width: 100px;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 4px;
        }
        
        .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .subject-item.active .toggle-icon {
            transform: rotate(180deg);
        }
        
        .subject-content {
            background: #fafbff;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }
        
        .subject-item.active .subject-content {
            padding: 25px;
            max-height: 2000px;
        }
        
        .exam-format {
            background: rgba(67, 97, 238, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95rem;
            border-left: 4px solid var(--primary);
        }
        
        .requirements-section {
            margin-top: 20px;
        }
        
        .requirements-section h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .requirements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .requirement-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);
        }
        
        .requirement-text {
            margin-bottom: 15px;
            font-size: 0.95rem;
        }
        
        .checkbox-group {
            display: flex;
            gap: 15px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: #666;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }
        
        .resources-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .resources-section h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .resources-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .resource-tag {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        /* Revision Techniques */
        .techniques-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .technique-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-top: 4px solid var(--accent);
            transition: transform 0.3s ease;
        }
        
        .technique-card:hover {
            transform: translateY(-5px);
        }
        
        .technique-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .technique-card p {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Timetable - Updated to 5 slots per day */
        .timetable-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .week-navigation {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn-outline {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .current-week {
            font-weight: 600;
            color: var(--secondary);
        }
        
        .timetable-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .timetable-header {
            display: grid;
            grid-template-columns: 100px repeat(7, 1fr);
            background: var(--primary);
            color: white;
            font-weight: 600;
            text-align: center;
        }
        
        .slot-header {
            padding: 15px 10px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .day-header {
            padding: 15px 10px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .day-header:last-child {
            border-right: none;
        }
        
        .timetable-body {
            display: grid;
            grid-template-columns: 100px repeat(7, 1fr);
            grid-auto-rows: 70px;
        }
        
        .slot-label {
            padding: 10px;
            border-right: 1px solid #eee;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fafafa;
            font-weight: 500;
        }
        
        .day-slot {
            border-right: 1px solid #eee;
            border-bottom: 1px solid #eee;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .day-slot:hover {
            background: rgba(67, 97, 238, 0.05);
        }
        
        .day-slot.booked {
            border: 2px solid white;
        }
        
        .add-slot-btn {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 1.2rem;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .add-slot-btn:hover {
            color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .subject-block {
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
            text-align: center;
            padding: 5px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        /* Subject Selector */
        .subject-selector {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .selector-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .subject-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .subject-option {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: 600;
            color: white;
        }
        
        .subject-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .selector-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 25px 0;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .quote {
            font-style: italic;
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            .header-logo {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .exam-info {
                width: 100%;
            }
            
            .requirements-grid {
                grid-template-columns: 1fr;
            }
            
            .timetable-header, .timetable-body {
                grid-template-columns: 80px repeat(7, 1fr);
            }
            
            .slot-label {
                padding: 5px;
                font-size: 0.75rem;
            }
            
            .subject-block {
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="header-logo">
                    <div class="logo-icon">
                        üè´
                    </div>
                    <div class="header-text">
                        <h1>St Paul's School - Richard's Exam Assistant</h1>
                        <p class="slogan">"Consistency beats cramming. Little and often wins the race!"</p>
                    </div>
                </div>
                <div class="exam-info">
                    <div class="exam-dates">Exams: 4th - 8th May 2026</div>
                    <div class="countdown" id="countdown"></div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="main-layout">
            <main>
                <section class="card">
                    <h2 class="card-title"><i class="fas fa-book-open"></i> All Subjects - Revision Requirements</h2>
                    <p style="margin-bottom: 20px; color: #666;">Click on any subject to expand and see detailed requirements. Check off each requirement as you revise it.</p>
                    
                    <div class="subjects-accordion" id="subjects-accordion">
                        <!-- Subjects will be generated here -->
                    </div>
                </section>
                
                <section class="card">
                    <h2 class="card-title"><i class="fas fa-calendar-alt"></i> Revision Timetable</h2>
                    <p style="margin-bottom: 20px; color: #666;">Plan your daily revision blocks. Click on any slot to add a subject.</p>
                    
                    <div class="timetable-controls">
                        <div class="week-navigation">
                            <button class="btn btn-outline" id="prev-week">
                                <i class="fas fa-chevron-left"></i> Prev Week
                            </button>
                            <div class="current-week" id="current-week">Week starting 3rd March 2026</div>
                            <button class="btn btn-outline" id="next-week">
                                Next Week <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <button class="btn" id="clear-timetable">
                            <i class="fas fa-trash-alt"></i> Clear Timetable
                        </button>
                    </div>
                    
                    <div class="timetable-container">
                        <div class="timetable-header">
                            <div class="slot-header">Slot</div>
                            <div class="day-header">Mon</div>
                            <div class="day-header">Tue</div>
                            <div class="day-header">Wed</div>
                            <div class="day-header">Thu</div>
                            <div class="day-header">Fri</div>
                            <div class="day-header">Sat</div>
                            <div class="day-header">Sun</div>
                        </div>
                        <div class="timetable-body" id="timetable-body">
                            <!-- Timetable slots will be generated here -->
                        </div>
                    </div>
                </section>
            </main>
            
            <aside>
                <section class="card">
                    <h2 class="card-title"><i class="fas fa-lightbulb"></i> Revision Techniques</h2>
                    <p style="margin-bottom: 20px; color: #666;">Effective strategies for Year 8 exams:</p>
                    
                    <div class="techniques-grid">
                        <div class="technique-card">
                            <h4><i class="fas fa-brain"></i> Active Recall</h4>
                            <p>Test yourself instead of just rereading notes. Cover answers and try to remember.</p>
                        </div>
                        <div class="technique-card">
                            <h4><i class="fas fa-history"></i> Spaced Repetition</h4>
                            <p>Review material at increasing intervals over time for better long-term memory.</p>
                        </div>
                        <div class="technique-card">
                            <h4><i class="fas fa-hourglass-half"></i> Pomodoro Technique</h4>
                            <p>25 minutes focused study, 5 minute break. Repeat 4 times then take a longer break.</p>
                        </div>
                        <div class="technique-card">
                            <h4><i class="fas fa-chalkboard-teacher"></i> Teach Someone</h4>
                            <p>Explain concepts to a family member. Teaching reinforces your own understanding.</p>
                        </div>
                        <div class="technique-card">
                            <h4><i class="fas fa-file-alt"></i> Past Papers</h4>
                            <p>Practice with previous exam questions under timed conditions.</p>
                        </div>
                        <div class="technique-card">
                            <h4><i class="fas fa-sticky-note"></i> Flashcards</h4>
                            <p>Use Quizlet for vocabulary and key terms. Digital or physical cards both work.</p>
                        </div>
                    </div>
                </section>
                
                <section class="card">
                    <h2 class="card-title"><i class="fas fa-bell"></i> Important Reminders</h2>
                    <div style="margin-top: 15px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(0,0,0,0.1);">
                            <div style="background: var(--warning); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                            <div>
                                <strong>Geography Exam</strong><br>
                                <span style="color: #666; font-size: 0.9rem;">4th May 2026 (First Exam!)</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(0,0,0,0.1);">
                            <div style="background: var(--primary); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-book"></i>
                            </div>
                            <div>
                                <strong>Complete Revision Materials</strong><br>
                                <span style="color: #666; font-size: 0.9rem;">By 15th March 2026</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="background: var(--success); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div>
                                <strong>Practice Papers Complete</strong><br>
                                <span style="color: #666; font-size: 0.9rem;">By 19th April 2026</span>
                            </div>
                        </div>
                    </div>
                </section>
            </aside>
        </div>
        
        <footer>
            <p class="quote">"The secret of getting ahead is getting started." ‚Äì Mark Twain</p>
            <p>St Paul's School ‚Ä¢ Year 8 End-of-Year Exams: 4th - 8th May 2026</p>
            <p style="margin-top: 10px; font-size: 0.85rem; color: #888;">All data is saved in your browser. Progress will be saved until you clear browser data.</p>
        </footer>
    </div>
    
    <!-- Subject Selector Modal -->
    <div class="subject-selector" id="subject-selector">
        <div class="selector-content">
            <h3 style="color: var(--primary); margin-bottom: 10px;">Select a Subject</h3>
            <p style="color: #666; margin-bottom: 20px;">Choose a subject for the selected time slot:</p>
            
            <div class="subject-options" id="subject-options">
                <!-- Subject options will be generated here -->
            </div>
            
            <div class="selector-actions">
                <button class="btn btn-outline" id="clear-slot">Clear Slot</button>
                <button class="btn" id="cancel-selector">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Subject data - Updated dates to 2026
        const subjects = [
            {
                id: 1,
                name: "English",
                color: "english",
                examDate: "6th May 2026",
                examFormat: "Two exams: Reading (65 min) and Writing (40 min). Reading: unseen text with analytical essay (PEEE structure). Writing: choice of genre.",
                requirements: [
                    "Learn PEEE paragraph structure: Point, Evidence, Explanation, Evaluation",
                    "Revise genres: Tragedy, Argument/Persuasion/Debate, Modern Novel, Free Verse",
                    "Practice analytical essay writing with introduction, 2+ PEEE paragraphs, conclusion",
                    "Learn spellings and meanings of vocabulary using 'look, cover, recite, check' method",
                    "Practice writing in different genres studied",
                    "Review and learn from PEEE target sheet"
                ],
                resources: [
                    "PEEE Target Sheet",
                    "Genre Characteristics Table", 
                    "Vocabulary Lists",
                    "Practice Unseen Texts"
                ],
                topics: 12,
                completedTopics: 0
            },
            {
                id: 2,
                name: "French",
                color: "french",
                examDate: "8th May 2026",
                examFormat: "All four skills: Writing, Reading, Listening, and Oral. Based on SPJ French Course (yellow and red booklets).",
                requirements: [
                    "Revise all essays and corrections from the year",
                    "Review vocabulary, grammar, and patterns from tests and worksheets",
                    "Practice all four skills: writing, reading, listening, speaking",
                    "Use Languages Online website for exercises",
                    "Use Quizlet for vocabulary and spelling practice",
                    "Revise topics: yourself, family, house, daily routine, hobbies, holidays, school, weather"
                ],
                resources: [
                    "SPJ French Course (Yellow/Red booklets)",
                    "Languages Online website",
                    "Quizlet French Vocabulary",
                    "Linguascope website",
                    "Encore Tricolore 2 textbook",
                    "80 Questions Practice Booklet"
                ],
                topics: 8,
                completedTopics: 0
            },
            {
                id: 3,
                name: "Geography",
                color: "geography",
                examDate: "4th May 2026",
                examFormat: "One paper with short to medium answer questions on Geographies of Health, China, and USA.",
                requirements: [
                    "Know case studies and examples for all topics",
                    "Understand Geographies of Health: NHS, Sierra Leone, environmental factors",
                    "Study China: physical features, cities, climate (monsoon), population, one-child policy",
                    "Study USA: physical features, cities, climate (extreme weather), politics, social inequalities",
                    "Use mindmaps, flashcards, and note-taking for revision",
                    "Review class resources on Google Classroom and workbooks"
                ],
                resources: [
                    "Class Workbooks",
                    "Google Classroom Resources",
                    "BBC Geography website",
                    "PowerPoint Presentations"
                ],
                topics: 10,
                completedTopics: 0
            },
            {
                id: 4,
                name: "History",
                color: "history",
                examDate: "8th May 2026",
                examFormat: "Two sections: A) Source Analysis on British Empire, B) Essay on Migration to Britain (at least two migrant groups, one must be Huguenots).",
                requirements: [
                    "Section A: Analyze sources (nature, origin, purpose, usefulness)",
                    "Section B: Essay on migration - revise at least two migrant groups",
                    "For each migrant group: why they came, how received, impacts",
                    "Use purple migration textbook and group presentation materials",
                    "Practice source analysis skills from British Empire textbook",
                    "Use effective revision methods: blurting, SQ3R, flashcards, practice questions"
                ],
                resources: [
                    "Purple Migration Textbook",
                    "Group Presentation Materials",
                    "British Empire Textbook",
                    "SPJ Study Skills Website"
                ],
                topics: 10,
                completedTopics: 0
            },
            {
                id: 5,
                name: "Science",
                color: "science",
                examDate: "7th May 2026",
                examFormat: "Paper 1 (60 min): Biology, Chemistry, Physics, data analysis. Paper 2 (30 min): Multiple-choice online assessment.",
                requirements: [
                    "Biology: Adaptation & Inheritance (B2, Ch3)",
                    "Chemistry: Periodic Table (C2, Ch1) & Metals & Acids (C2, Ch3)",
                    "Physics: Electricity & Magnetism (P2, Ch1) & Motion & Pressure (P2, Ch3)",
                    "Data analysis and graph work",
                    "Complete Revision Audit on Google Classroom",
                    "Use knowledge organisers, checklists, glossaries, retrieval questions on Kerboodle"
                ],
                resources: [
                    "Kerboodle Resources",
                    "Knowledge Organisers",
                    "Checklists and Glossaries",
                    "Retrieval Questions",
                    "Revision Audit"
                ],
                topics: 18,
                completedTopics: 0
            },
            {
                id: 6,
                name: "Latin",
                color: "latin",
                examDate: "5th May 2026",
                examFormat: "60-minute exam: Section A (comprehension), B (translation + grammar), C (English to Latin), D (Classical Civilisation). Based on de Romanis chapters 1-6.",
                requirements: [
                    "Grammar: nouns (declensions 1-3), adjectives, verbs (conjugations 1-5)",
                    "Tenses: present, future, imperfect, perfect",
                    "Irregular verbs: sum, possum, eo, inquit, fero, nolo, volo",
                    "Vocabulary from de Romanis chapters 1-6",
                    "Classical Civilisation: temples, priests, sacrifices, curses, Underworld, religious ceremonies, gladiators, chariot races, fate and prophecy"
                ],
                resources: [
                    "de Romanis Textbook (Ch1-6)",
                    "Grammar Reference Booklet",
                    "Quizlet Vocabulary Decks",
                    "Google Classroom Activities"
                ],
                topics: 8,
                completedTopics: 0
            },
            {
                id: 7,
                name: "Greek",
                color: "greek",
                examDate: "5th May 2026",
                examFormat: "60-minute exam: Section A (transliteration), B (Greek to English), C (Greek sentences + grammar), D (English to Greek). Based on 'An Introduction to Classical Greek' chapters 1-5.",
                requirements: [
                    "Transliteration: Greek alphabet recognition",
                    "Grammar: definite article, 1st/2nd declension nouns, present tense verbs",
                    "Vocabulary from provided list on Google Classroom",
                    "Translation: Greek to English and English to Greek",
                    "Use edisce! website for practice with endings"
                ],
                resources: [
                    "'An Introduction to Classical Greek' Ch1-5",
                    "Grammar Reference Booklet",
                    "Vocabulary List (Google Classroom)",
                    "Quizlet Learning Decks",
                    "edisce! Website"
                ],
                topics: 8,
                completedTopics: 0
            },
            {
                id: 8,
                name: "T&P (Theology & Philosophy)",
                color: "tandp",
                examDate: "8th May 2026",
                examFormat: "Paper 1 (15 min): Multiple-choice on Christianity and Ethics. Paper 2 (30 min): PEOC essay on Crime and Punishment.",
                requirements: [
                    "Christianity: Jesus' life, ministry, death, parables, miracles, St Paul",
                    "Ethics: Absolutism/Deontology, Human Rights, Relativism/Consequentialism",
                    "Trolley problem and outcome-based ethics",
                    "Aims of punishment",
                    "PEOC essay structure: Point, Example, Explanation, Counterargument, Conclusion"
                ],
                resources: [
                    "Christianity Unit Notes",
                    "Ethics Lessons Materials",
                    "PEOC Essay Structure Guide"
                ],
                topics: 6,
                completedTopics: 0
            },
            {
                id: 9,
                name: "Mathematics",
                color: "math",
                examDate: "5th May 2026",
                examFormat: "Standard Year 8 mathematics exam covering algebra, geometry, statistics, and number work.",
                requirements: [
                    "Algebra: solving equations, expressions, and simplifying",
                    "Number: fractions, decimals, percentages, and ratios",
                    "Geometry: angles, shapes, area, and perimeter",
                    "Statistics: data handling, graphs, and averages",
                    "Probability: basic concepts and calculations"
                ],
                resources: [
                    "Mathematics Textbook",
                    "Class Exercise Books",
                    "Past Papers",
                    "Online Resources (Corbett Maths)"
                ],
                topics: 15,
                completedTopics: 0
            }
        ];

        // Timetable data
        let currentWeekStart = new Date();
        currentWeekStart.setDate(currentWeekStart.getDate() - currentWeekStart.getDay() + 1); // Start on Monday
        
        let timetableData = {};
        let selectedSlot = null;

        // Initialize the app
        function initApp() {
            loadProgress();
            renderSubjects();
            renderTimetable();
            setupEventListeners();
            updateCountdown();
            
            // Set up subject selector
            renderSubjectOptions();
        }

        // Render subjects accordion
        function renderSubjects() {
            const container = document.getElementById('subjects-accordion');
            container.innerHTML = '';
            
            subjects.forEach(subject => {
                const progress = Math.floor((subject.completedTopics / subject.topics) * 100);
                const colorStyle = getComputedStyle(document.documentElement).getPropertyValue(`--${subject.color}`);
                
                // Get requirement checkboxes state
                const requirementStates = getRequirementStates(subject.id);
                
                const subjectItem = document.createElement('div');
                subjectItem.className = 'subject-item';
                subjectItem.innerHTML = `
                    <div class="subject-header" onclick="toggleSubject(${subject.id})">
                        <div class="subject-title">
                            <span class="subject-color" style="background-color: ${colorStyle}"></span>
                            ${subject.name}
                        </div>
                        <div class="subject-meta">
                            <div class="exam-date">${subject.examDate}</div>
                            <div class="subject-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progress}%"></div>
                                </div>
                                <span>${progress}%</span>
                            </div>
                            <div class="toggle-icon">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                    </div>
                    <div class="subject-content" id="subject-content-${subject.id}">
                        <div class="exam-format">
                            <strong>üìù Exam Format:</strong> ${subject.examFormat}
                        </div>
                        
                        <div class="requirements-section">
                            <h4><i class="fas fa-list-check"></i> Revision Requirements</h4>
                            <div class="requirements-grid" id="requirements-${subject.id}">
                                <!-- Requirements will be generated here -->
                            </div>
                        </div>
                        
                        <div class="resources-section">
                            <h4><i class="fas fa-bookmark"></i> Resources</h4>
                            <div class="resources-list">
                                ${subject.resources.map(resource => `
                                    <div class="resource-tag">${resource}</div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(subjectItem);
                
                // Render requirements with checkboxes
                renderRequirements(subject.id, requirementStates);
            });
        }

        // Render requirements with checkboxes
        function renderRequirements(subjectId, requirementStates) {
            const container = document.getElementById(`requirements-${subjectId}`);
            const subject = subjects.find(s => s.id === subjectId);
            
            if (!container || !subject) return;
            
            container.innerHTML = '';
            
            subject.requirements.forEach((requirement, index) => {
                const state = requirementStates[index] || [false, false, false];
                
                const requirementItem = document.createElement('div');
                requirementItem.className = 'requirement-item';
                requirementItem.innerHTML = `
                    <div class="requirement-text">${requirement}</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="req-${subjectId}-${index}-1" 
                                   ${state[0] ? 'checked' : ''}
                                   onchange="updateRequirement(${subjectId}, ${index}, 0, this.checked)">
                            <label for="req-${subjectId}-${index}-1">Rev 1</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="req-${subjectId}-${index}-2"
                                   ${state[1] ? 'checked' : ''}
                                   onchange="updateRequirement(${subjectId}, ${index}, 1, this.checked)">
                            <label for="req-${subjectId}-${index}-2">Rev 2</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="req-${subjectId}-${index}-3"
                                   ${state[2] ? 'checked' : ''}
                                   onchange="updateRequirement(${subjectId}, ${index}, 2, this.checked)">
                            <label for="req-${subjectId}-${index}-3">Rev 3</label>
                        </div>
                    </div>
                `;
                
                container.appendChild(requirementItem);
            });
        }

        // Toggle subject accordion
        function toggleSubject(subjectId) {
            const subjectItem = document.querySelector(`#subject-content-${subjectId}`).parentElement;
            subjectItem.classList.toggle('active');
        }

        // Update requirement checkbox
        function updateRequirement(subjectId, reqIndex, checkIndex, isChecked) {
            let states = JSON.parse(localStorage.getItem(`reqStates_${subjectId}`)) || [];
            
            if (!states[reqIndex]) {
                states[reqIndex] = [false, false, false];
            }
            
            states[reqIndex][checkIndex] = isChecked;
            
            // Update subject progress based on completed revisions
            const subject = subjects.find(s => s.id === subjectId);
            if (subject) {
                let completedCount = 0;
                states.forEach(stateGroup => {
                    // Count how many requirements have at least one revision completed
                    if (stateGroup && stateGroup.some(checked => checked)) {
                        completedCount++;
                    }
                });
                
                subject.completedTopics = completedCount;
                updateSubjectProgress(subjectId);
            }
            
            localStorage.setItem(`reqStates_${subjectId}`, JSON.stringify(states));
            saveProgress();
        }

        // Get requirement states from localStorage
        function getRequirementStates(subjectId) {
            const states = JSON.parse(localStorage.getItem(`reqStates_${subjectId}`)) || [];
            return states;
        }

        // Update subject progress display
        function updateSubjectProgress(subjectId) {
            const subject = subjects.find(s => s.id === subjectId);
            if (!subject) return;
            
            const progress = Math.floor((subject.completedTopics / subject.requirements.length) * 100);
            const progressFill = document.querySelector(`#subject-content-${subjectId}`).previousElementSibling
                .querySelector('.progress-fill');
            
            if (progressFill) {
                progressFill.style.width = `${progress}%`;
            }
            
            const progressText = document.querySelector(`#subject-content-${subjectId}`).previousElementSibling
                .querySelector('.subject-progress span');
            
            if (progressText) {
                progressText.textContent = `${progress}%`;
            }
            
            saveProgress();
        }

        // Render timetable - Updated to 5 slots per day
        function renderTimetable() {
            // Update week display
            document.getElementById('current-week').textContent = 
                `Week starting ${formatDate(currentWeekStart)}`;
            
            // Generate timetable
            const container = document.getElementById('timetable-body');
            container.innerHTML = '';
            
            // 5 slots per day
            const slotNames = ["Morning", "Midday", "Afternoon", "Evening", "Night"];
            
            // Create timetable grid
            slotNames.forEach((slotName, slotIndex) => {
                // Slot label column
                const slotLabel = document.createElement('div');
                slotLabel.className = 'slot-label';
                slotLabel.textContent = slotName;
                container.appendChild(slotLabel);
                
                // Day columns
                for (let day = 0; day < 7; day++) {
                    const daySlot = document.createElement('div');
                    daySlot.className = 'day-slot';
                    daySlot.dataset.day = day;
                    daySlot.dataset.slot = slotIndex;
                    
                    // Calculate date for this slot
                    const slotDate = new Date(currentWeekStart);
                    slotDate.setDate(currentWeekStart.getDate() + day);
                    
                    const dateKey = `${slotDate.toISOString().split('T')[0]}_slot${slotIndex}`;
                    
                    // Check if slot is booked
                    if (timetableData[dateKey]) {
                        const subject = subjects.find(s => s.name === timetableData[dateKey]);
                        if (subject) {
                            const colorStyle = getComputedStyle(document.documentElement).getPropertyValue(`--${subject.color}`);
                            daySlot.classList.add('booked');
                            daySlot.innerHTML = `
                                <div class="subject-block" style="background-color: ${colorStyle}">
                                    ${subject.name}
                                </div>
                            `;
                        }
                    } else {
                        daySlot.innerHTML = `<button class="add-slot-btn">+ Add</button>`;
                    }
                    
                    daySlot.onclick = () => openSubjectSelector(day, slotIndex, dateKey);
                    container.appendChild(daySlot);
                }
            });
        }

        // Format date for display
        function formatDate(date) {
            const day = date.getDate();
            const month = date.toLocaleString('default', { month: 'short' });
            const year = date.getFullYear();
            
            // Add ordinal suffix
            let suffix = 'th';
            if (day === 1 || day === 21 || day === 31) suffix = 'st';
            else if (day === 2 || day === 22) suffix = 'nd';
            else if (day === 3 || day === 23) suffix = 'rd';
            
            return `${day}${suffix} ${month} ${year}`;
        }

        // Render subject options for selector
        function renderSubjectOptions() {
            const container = document.getElementById('subject-options');
            container.innerHTML = '';
            
            subjects.forEach(subject => {
                const colorStyle = getComputedStyle(document.documentElement).getPropertyValue(`--${subject.color}`);
                const option = document.createElement('div');
                option.className = 'subject-option';
                option.style.backgroundColor = colorStyle;
                option.textContent = subject.name;
                option.onclick = () => selectSubjectForSlot(subject.name);
                
                container.appendChild(option);
            });
        }

        // Open subject selector
        function openSubjectSelector(day, slotIndex, dateKey) {
            selectedSlot = { day, slotIndex, dateKey };
            document.getElementById('subject-selector').style.display = 'flex';
        }

        // Select subject for slot
        function selectSubjectForSlot(subjectName) {
            if (!selectedSlot) return;
            
            timetableData[selectedSlot.dateKey] = subjectName;
            localStorage.setItem('timetableData', JSON.stringify(timetableData));
            
            document.getElementById('subject-selector').style.display = 'none';
            renderTimetable();
        }

        // Clear selected slot
        function clearSelectedSlot() {
            if (!selectedSlot) return;
            
            delete timetableData[selectedSlot.dateKey];
            localStorage.setItem('timetableData', JSON.stringify(timetableData));
            
            document.getElementById('subject-selector').style.display = 'none';
            renderTimetable();
        }

        // Clear entire timetable
        function clearTimetable() {
            if (confirm('Are you sure you want to clear the entire timetable?')) {
                timetableData = {};
                localStorage.setItem('timetableData', JSON.stringify(timetableData));
                renderTimetable();
            }
        }

        // Navigate to previous week
        function prevWeek() {
            currentWeekStart.setDate(currentWeekStart.getDate() - 7);
            renderTimetable();
        }

        // Navigate to next week
        function nextWeek() {
            currentWeekStart.setDate(currentWeekStart.getDate() + 7);
            renderTimetable();
        }

        // Update countdown to 2026
        function updateCountdown() {
            const examDate = new Date('2026-05-04');
            const today = new Date();
            
            const timeDiff = examDate.getTime() - today.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            
            let countdownText = '';
            if (daysDiff > 60) {
                const months = Math.floor(daysDiff / 30);
                countdownText = `${months} month${months !== 1 ? 's' : ''} until exams`;
            } else if (daysDiff > 14) {
                const weeks = Math.floor(daysDiff / 7);
                countdownText = `${weeks} week${weeks !== 1 ? 's' : ''} until exams`;
            } else if (daysDiff > 1) {
                countdownText = `${daysDiff} day${daysDiff !== 1 ? 's' : ''} until exams`;
            } else if (daysDiff === 1) {
                countdownText = "1 day until exams start!";
            } else if (daysDiff === 0) {
                countdownText = "Exams start today!";
            } else {
                countdownText = "Exams have passed";
            }
            
            document.getElementById('countdown').textContent = countdownText;
        }

        // Load progress from localStorage
        function loadProgress() {
            // Load subject progress
            const savedSubjects = localStorage.getItem('subjectProgress');
            if (savedSubjects) {
                const parsed = JSON.parse(savedSubjects);
                parsed.forEach(savedSubject => {
                    const subject = subjects.find(s => s.id === savedSubject.id);
                    if (subject) {
                        subject.completedTopics = savedSubject.completedTopics || 0;
                    }
                });
            }
            
            // Load timetable data
            const savedTimetable = localStorage.getItem('timetableData');
            if (savedTimetable) {
                timetableData = JSON.parse(savedTimetable);
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            // Save subject progress
            const subjectProgress = subjects.map(s => ({
                id: s.id,
                completedTopics: s.completedTopics
            }));
            localStorage.setItem('subjectProgress', JSON.stringify(subjectProgress));
        }

        // Set up event listeners
        function setupEventListeners() {
            // Week navigation
            document.getElementById('prev-week').addEventListener('click', prevWeek);
            document.getElementById('next-week').addEventListener('click', nextWeek);
            
            // Clear timetable
            document.getElementById('clear-timetable').addEventListener('click', clearTimetable);
            
            // Subject selector actions
            document.getElementById('clear-slot').addEventListener('click', clearSelectedSlot);
            document.getElementById('cancel-selector').addEventListener('click', () => {
                document.getElementById('subject-selector').style.display = 'none';
            });
            
            // Close selector when clicking outside
            document.getElementById('subject-selector').addEventListener('click', (e) => {
                if (e.target.id === 'subject-selector') {
                    document.getElementById('subject-selector').style.display = 'none';
                }
            });
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>